--Activity Code: CMSDRFND


-- Line 535 
-- class: CM_SecDepst_Refund_Leasing
-- Screen 1
-- method: cmd_ok_ActionPerformed
-- EVENT: all radio btn click
select value(AVL_SEQ_NO,0) as AVL_SEQ_NO,int_lim_no,int_lim_year,LOAN_TYPE,digits(LOAN_NO) as LOAN_NO,digits(LOAN_YEAR) as LOAN_YEAR,digits(BRN_CD) as BRN_CD,digits(AC_TYPE) as AC_TYPE,digits(CUST_NO) as CUST_NO,digits(RUN_NO) as RUN_NO,digits(CHK_DIGT) as CHK_DIGT,digits(NOM_AC_TYPE) as NOM_AC_TYPE,digits(NOM_CUST_NO) as NOM_CUST_NO,digits(NOM_RUN_NO) as NOM_RUN_NO,digits(NOM_CHK_DIGT) as NOM_CHK_DIGT,digits(LOAN_AC_TYPE) as LOAN_AC_TYPE,digits(LOAN_CUST_NO) as LOAN_CUST_NO,digits(LOAN_RUN_NO) as LOAN_RUN_NO,digits(LOAN_CHK_DIGT) as LOAN_CHK_DIGT,digits(OVR_AC_TYPE) as OVR_AC_TYPE,digits(OVR_CUST_NO) as OVR_CUST_NO,digits(OVR_RUN_NO) as OVR_RUN_NO,digits(OVR_CHK_DIGT) as OVR_CHK_DIGT,digits(CR_AC_TYPE) as CR_AC_TYPE,digits(CR_CUST_NO) as CR_CUST_NO,digits(CR_RUN_NO) as CR_RUN_NO,digits(CR_CHK_DIGT) as CR_CHK_DIGT,GRANT_DATE,MAT_DATE,LOAN_AMT,FREQ,DOC_TYPE,VALUE(DOC_NO,0) AS DOC_NO,VALUE(DOC_YEAR,0) AS DOC_YEAR,LUM_SUM_INST,VALUE(SECDEP_NO,0) AS SECDEP_NO,VALUE(SECDEP_PERC,0) AS SECDEP_PERC,VALUE(SECDEP_AMT,0) AS SECDEP_AMT,value(SALVAGE_PERC,0) as SALVAGE_PERC,value(Salvage_AMT,0) as Salvage_AMT,digits(Salvage_AC_TYPE) as Salvage_AC_TYPE,digits(Salvage_CUST_NO) as Salvage_CUST_NO,digits(Salvage_RUN_NO) as Salvage_RUN_NO,digits(Salvage_CHK_DIGT) as Salvage_CHK_DIGT, VALUE(TENURE,0) as TENURE,TENURE_UNITS,VALUE(NO_OF_INST,0) as NO_OF_INST,REPAY_FREQ,MORAT_DT,VALUE(MORAT_PRD,0) as MORAT_PRD,INST_SCH_DT,value(status,'') as status,value(accr_amt,0) as accr_amt,value(rec_amt,0) as rec_amt,digits(RT_CODE) as RT_CODE,BASE_RATE,SPREAD_RT,FLOOR_RT,CEILING_RT,MU_RATE,REMARKS ,value(charity_amt,0) as charity_amt from cm_loan_tl where  brn_cd=1024 and full='Y' and (loan_amt=rec_amt) and status='U'  and loan_type in ('LF')  and GRANT_DATE!=date('2024-10-31');


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8476
select a.ledg_bal as ledgbal,a.shadow_d as shadow_d,a.shadow_c as shadow_c,a.lim_amt as lim_amt,a.amt_blk as block,a.uncl_amt as uncl_amt,a.AC_OP_DT,a.MOTHER_NAME,a.acc_cat_cd,  a.ac_title,A.IN_ACR_C,A.IN_ACR_d ,VALUE(A.MAIL_ADDRESS1,' ') as mad1,VALUE(A.MAIL_ADDRESS2,' ') as mad2,A.AC_TITLE from ACCOUNT_TL A  where  a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.brn_cd = 1024;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8532
Select value(wht_amount_due,0) as wht_amount_due  ,value(amount,0) as amount,value(amount_exempted,0) as amount_exempted,value(wht_amount_exempted,0) as wht_amount_exempted   from account_wh_tl  a  where a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.tax_type_cd =0.0 and a.brn_cd = 1024 and post_dt = '2024-10-31';


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8567
-- If no response, customer not found in Customer Table
select    VALUE(C.PRM_ADDRESS1,'') as ad1,VALUE(C.PRM_ADDRESS2,' ') as ad2,C.CUST_NAME,value(c.import_reg_no,'') as import_reg_no,value(c.EXPort_reg_no,'') as EXPORT_reg_no,VALUE(C.TEL_OFFICE,'') as TELNO,VALUE(C.NTN,'') as NTNO, VALUE(FILER, 'N') AS FILER  FROM CUSTOMER_TL C where brn_Cd =1024 and cust_no   = 012664;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8581
-- If no response, customer not found in Customer Table
select  t.ac_desc,t.ac_desc,t.min_bal,t.ccy_cd from actyptl t where ac_type = 0966;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8591
-- If no response, 'CCY not found in CCY Table'
select  ccy_name,dec_pos from ccy_tl where ccy_cd   = 586;


-- class: FormatClass
-- Method: getRate
-- Screen : 1
-- Line: 15282

select * from ccy_exg_tl where ccy_cd=586 order by ccy_post_dt desc,tran_time desc  fetch first 1 rows ONLY;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8603
Select cond_cd as cnd_cd from  ACCTYP_COND_TL where ac_type = 0966 with ur;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8625
Select TAX_TYPE_CD  as TAX_TYPE_CD  from  cust_tax_exemp  where brn_cd = 1024 and cust_no = 012664 and expiry_date >= '2024-09-19';


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8655
Select cnd_cd as cnd_cd from  acc_cond_tl where brn_cd = 1024 and ac_type = 0966 and cust_no = 012664 and run_no = 01 and chk_digt = 6;


-- class: CM_SecDepst_Refund_Leasing
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 956
select BRN_CD,digits(SECDEP_NO) as SECDEP_NO,LOAN_TYPE,LOAN_AC_TYPE,LOAN_CUST_NO,LOAN_RUN_NO,LOAN_CHK_DIGT,digits(SECDEP_AC_TYPE) as SECDEP_AC_TYPE,digits(SECDEP_CUST_NO) as SECDEP_CUST_NO,digits(SECDEP_RUN_NO) as SECDEP_RUN_NO,digits(SECDEP_CHK_DIGT) as SECDEP_CHK_DIGT,digits(DR_AC_TYPE) as DR_AC_TYPE,digits(DR_CUST_NO) as DR_CUST_NO,digits(DR_RUN_NO) as DR_RUN_NO,digits(DR_CHK_DIGT) as DR_CHK_DIGT,SECDEP_PERC,SECDEP_AMT,FIN_AMT,STATUS,digits(VOUCH_NO) as VOUCH_NO,digits(VOUCH_YEAR) as VOUCH_YEAR, REMARKS,POST_BY,POST_DT,POST_TIME,value(inst_no,0) as inst_no,inst_dt  from cm_SECDEPOSIT_TL  where brn_cd=1024 and loan_ac_type=0966 and loan_cust_no=012664 and loan_run_no=01 and loan_chk_digt=6 and loan_type in ('LF') and status!='C'  and SECDEP_NO=3;


-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4707
select rtrim(value(sub_fac_desc,'')) as sub_fac_desc, value(lim_amt,0) as lim_amt,value(avl_lim,0) as avl_lim  from cm_acc_lim_tl A INNER JOIN cm_sub_facility_tl b  on (a.MAJ_FAC_CD=b.MAJ_FAC_CD and a.SUB_FAC_CD=b.SUB_FAC_CD) where  brn_cd=1024 and ac_type=0966 and cust_no=012664 and run_no=01 and chk_digt=6 and (status is null or status='A')  union select rtrim(value(sub_fac_desc,'')) as sub_fac_desc ,value(lim_amt,0) as lim_amt,value(avl_lim,0) as avl_lim  from cm_acc_SUB_lim_tl A INNER JOIN cm_sub_facility_tl b  on (a.MAJ_FAC_CD=b.MAJ_FAC_CD and a.SUB_FAC_CD=b.SUB_FAC_CD) where  brn_cd=1024 and ac_type=0966 and cust_no=012664 and run_no=01 and chk_digt=6 and (status is null or status='A') ;

-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4867
select a.POST_BY,a.post_dt,value(AVL_SEQ_NO,0) as AVL_SEQ_NO,int_lim_no,int_lim_year,digits(a.VOUCH_NO) as VOUCH_NO,digits(a.VOUCH_YEAR) as VOUCH_YEAR,LOAN_TYPE,digits(LOAN_NO) as LOAN_NO,digits(LOAN_YEAR) as LOAN_YEAR,digits(a.BRN_CD) as BRN_CD,digits(b.AC_TYPE) as AC_TYPE,digits(b.CUST_NO) as CUST_NO,digits(b.RUN_NO) as RUN_NO,digits(b.CHK_DIGT) as CHK_DIGT,digits(NOM_AC_TYPE) as NOM_AC_TYPE,digits(NOM_CUST_NO) as NOM_CUST_NO,digits(NOM_RUN_NO) as NOM_RUN_NO,digits(NOM_CHK_DIGT) as NOM_CHK_DIGT,digits(LOAN_AC_TYPE) as LOAN_AC_TYPE,digits(LOAN_CUST_NO) as LOAN_CUST_NO,digits(LOAN_RUN_NO) as LOAN_RUN_NO,digits(LOAN_CHK_DIGT) as LOAN_CHK_DIGT,digits(OVR_AC_TYPE) as OVR_AC_TYPE,digits(OVR_CUST_NO) as OVR_CUST_NO,digits(OVR_RUN_NO) as OVR_RUN_NO,digits(OVR_CHK_DIGT) as OVR_CHK_DIGT,digits(CR_AC_TYPE) as CR_AC_TYPE,digits(CR_CUST_NO) as CR_CUST_NO,digits(CR_RUN_NO) as CR_RUN_NO,digits(CR_CHK_DIGT) as CR_CHK_DIGT,GRANT_DATE,MAT_DATE,LOAN_AMT,FREQ,LUM_SUM_INST,VALUE(DAYS_TOT_INT,0) AS DAYS_TOT_INT ,VALUE(TENURE,0) as TENURE,TENURE_UNITS,VALUE(NO_OF_INST,0) as NO_OF_INST,REPAY_FREQ,MORAT_DT,VALUE(MORAT_PRD,0) as MORAT_PRD,INST_SCH_DT,value(status,'') as status,value(b.accr_amt,0) as accr_amt,value(b.rec_amt,0) as rec_amt,digits(RT_CODE) as RT_CODE,BASE_RATE,SPREAD_RT,FLOOR_RT,CEILING_RT,b.MU_RATE,b.REMARKS, digits(SECDEP_NO) AS SECDEP_NO,VALUE(SECDEP_PERC,0) AS SECDEP_PERC,VALUE(SECDEP_AMT,0) AS SECDEP_AMT,value(SALVAGE_PERC,0) as SALVAGE_PERC,value(Salvage_AMT,0) as Salvage_AMT,digits(Salvage_AC_TYPE) as Salvage_AC_TYPE,digits(Salvage_CUST_NO) as Salvage_CUST_NO,digits(Salvage_RUN_NO) as Salvage_RUN_NO,digits(Salvage_CHK_DIGT) as Salvage_CHK_DIGT ,VALUE(CHARITY_AMT,0) as CHARITY_AMT  from tfin_vouch_tl a inner join cm_loan_tl b  on (a.brn_cd=b.brn_cd and a.doc_no=b.loan_no and a.doc_year=b.loan_year)  where  a.tran_sts!='9' and narr2='Secdepo refund'  and a.amount<0  and a.brn_cd=1024 and b.cust_no=012664 and b.AC_TYPE=0966 and b.run_no=01 and b.chk_digt=6 and full='Y' and b.status!='C'  and a.doc_type in ('LF')  AND LOAN_NO=00016 AND LOAN_YEAR=2017 AND a.vouch_NO=26803 AND a.vouch_YEAR=2024;



-- class: CM_SecDepst_Refund_Leasing
-- Method: get_SecDeposit_info
-- Screen : 1
-- Line: 956
select BRN_CD,digits(SECDEP_NO) as SECDEP_NO,LOAN_TYPE,LOAN_AC_TYPE,LOAN_CUST_NO,LOAN_RUN_NO,LOAN_CHK_DIGT,digits(SECDEP_AC_TYPE) as SECDEP_AC_TYPE,digits(SECDEP_CUST_NO) as SECDEP_CUST_NO,digits(SECDEP_RUN_NO) as SECDEP_RUN_NO,digits(SECDEP_CHK_DIGT) as SECDEP_CHK_DIGT,digits(DR_AC_TYPE) as DR_AC_TYPE,digits(DR_CUST_NO) as DR_CUST_NO,digits(DR_RUN_NO) as DR_RUN_NO,digits(DR_CHK_DIGT) as DR_CHK_DIGT,SECDEP_PERC,SECDEP_AMT,FIN_AMT,STATUS,digits(VOUCH_NO) as VOUCH_NO,digits(VOUCH_YEAR) as VOUCH_YEAR, REMARKS,POST_BY,POST_DT,POST_TIME,value(inst_no,0) as inst_no,inst_dt  from cm_SECDEPOSIT_TL  where brn_cd=1024 and loan_ac_type=0966 and loan_cust_no=012664 and loan_run_no=01 and loan_chk_digt=6 and loan_type in ('LF') and status!='C'  and SECDEP_NO=000003;




-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 12074
SELECT value(tran_desc1,'') as tran_desc1,value(tran_desc2,'') as tran_desc2 from trn_code_tl where tran_Cd = 80631;

-- class: CM_SecDepst_Refund_Leasing
-- Method: cmd_ok_ActionPerformed
-- Screen : 1
-- Line: 520
-- event: customer number ok
select * from customer_tl where brn_cd=1024 and cust_no=012664

-- class: CM_SecDepst_Refund_Leasing
-- Method: cmd_ok_ActionPerformed
-- Screen : 1
-- Line: 578
-- event: customer number ok
select a.post_dt,value(AVL_SEQ_NO,0) as AVL_SEQ_NO,int_lim_no,int_lim_year,digits(a.VOUCH_NO) as VOUCH_NO,digits(a.VOUCH_YEAR) as VOUCH_YEAR,LOAN_TYPE,digits(LOAN_NO) as LOAN_NO,digits(LOAN_YEAR) as LOAN_YEAR,digits(a.BRN_CD) as BRN_CD,digits(b.AC_TYPE) as AC_TYPE,digits(b.CUST_NO) as CUST_NO,digits(b.RUN_NO) as RUN_NO,digits(b.CHK_DIGT) as CHK_DIGT,digits(NOM_AC_TYPE) as NOM_AC_TYPE,digits(NOM_CUST_NO) as NOM_CUST_NO,digits(NOM_RUN_NO) as NOM_RUN_NO,digits(NOM_CHK_DIGT) as NOM_CHK_DIGT,digits(LOAN_AC_TYPE) as LOAN_AC_TYPE,digits(LOAN_CUST_NO) as LOAN_CUST_NO,digits(LOAN_RUN_NO) as LOAN_RUN_NO,digits(LOAN_CHK_DIGT) as LOAN_CHK_DIGT,digits(OVR_AC_TYPE) as OVR_AC_TYPE,digits(OVR_CUST_NO) as OVR_CUST_NO,digits(OVR_RUN_NO) as OVR_RUN_NO,digits(OVR_CHK_DIGT) as OVR_CHK_DIGT,digits(CR_AC_TYPE) as CR_AC_TYPE,digits(CR_CUST_NO) as CR_CUST_NO,digits(CR_RUN_NO) as CR_RUN_NO,digits(CR_CHK_DIGT) as CR_CHK_DIGT,GRANT_DATE,MAT_DATE,LOAN_AMT,FREQ,LUM_SUM_INST,VALUE(SECDEP_NO,0) AS SECDEP_NO,VALUE(SECDEP_PERC,0) AS SECDEP_PERC,VALUE(SECDEP_AMT,0) AS SECDEP_AMT,value(SALVAGE_PERC,0) as SALVAGE_PERC,value(Salvage_AMT,0) as Salvage_AMT,digits(Salvage_AC_TYPE) as Salvage_AC_TYPE,digits(Salvage_CUST_NO) as Salvage_CUST_NO,digits(Salvage_RUN_NO) as Salvage_RUN_NO,digits(Salvage_CHK_DIGT) as Salvage_CHK_DIGT, VALUE(TENURE,0) as TENURE,TENURE_UNITS,VALUE(NO_OF_INST,0) as NO_OF_INST,REPAY_FREQ,MORAT_DT,VALUE(MORAT_PRD,0) as MORAT_PRD,INST_SCH_DT,value(status,'') as status,value(b.accr_amt,0) as accr_amt,value(b.rec_amt,0) as rec_amt,digits(RT_CODE) as RT_CODE,BASE_RATE,SPREAD_RT,FLOOR_RT,CEILING_RT,b.MU_RATE,b.REMARKS ,value(charity_amt,0) as charity_amt from tfin_vouch_tl a inner join cm_loan_tl b  on (a.brn_cd=b.brn_cd and a.doc_no=b.loan_no and a.doc_year=b.loan_year)  where  a.tran_sts!='9' and narr2='Secdepo refund' and narr3!='REVERSED' and a.amount<0 and a.brn_cd=1024 and b.cust_no=012664 and full='Y' and b.status='P'  and a.doc_type in ('LF');

-- class: TfinUtil
-- Method: cmd_ok_ActionPerformed
-- Screen : 1
-- Line: 8476
-- event: customer number ok
select a.ledg_bal as ledgbal,a.shadow_d as shadow_d,a.shadow_c as shadow_c,a.lim_amt as lim_amt,a.amt_blk as block,a.uncl_amt as uncl_amt,a.AC_OP_DT,a.MOTHER_NAME,a.acc_cat_cd,  a.ac_title,A.IN_ACR_C,A.IN_ACR_d ,VALUE(A.MAIL_ADDRESS1,' ') as mad1,VALUE(A.MAIL_ADDRESS2,' ') as mad2,A.AC_TITLE from ACCOUNT_TL A  where  a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.brn_cd = 1024;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8532
Select value(wht_amount_due,0) as wht_amount_due  ,value(amount,0) as amount,value(amount_exempted,0) as amount_exempted,value(wht_amount_exempted,0) as wht_amount_exempted   from account_wh_tl  a  where a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.tax_type_cd =0.0 and a.brn_cd = 1024 and post_dt = '2024-10-25';


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8567
select    VALUE(C.PRM_ADDRESS1,'') as ad1,VALUE(C.PRM_ADDRESS2,' ') as ad2,C.CUST_NAME,value(c.import_reg_no,'') as import_reg_no,value(c.EXPort_reg_no,'') as EXPORT_reg_no,VALUE(C.TEL_OFFICE,'') as TELNO,VALUE(C.NTN,'') as NTNO, VALUE(FILER, 'N') AS FILER  FROM CUSTOMER_TL C where brn_Cd =1024 and cust_no   = 012664;

-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8581
select  	t.ac_desc,t.ac_desc,t.min_bal,t.ccy_cd from actyptl t where ac_type = 0966;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8591
-- event: customer number ok
select  ccy_name,dec_pos from ccy_tl where ccy_cd   = 586;




-- EVENT : ROW CLICKED

-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8476
select a.ledg_bal as ledgbal,a.shadow_d as shadow_d,a.shadow_c as shadow_c,a.lim_amt as lim_amt,a.amt_blk as block,a.uncl_amt as uncl_amt,a.AC_OP_DT,a.MOTHER_NAME,a.acc_cat_cd,  a.ac_title,A.IN_ACR_C,A.IN_ACR_d ,VALUE(A.MAIL_ADDRESS1,' ') as mad1,VALUE(A.MAIL_ADDRESS2,' ') as mad2,A.AC_TITLE from ACCOUNT_TL A  where  a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.brn_cd = 1024;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8532
Select value(wht_amount_due,0) as wht_amount_due  ,value(amount,0) as amount,value(amount_exempted,0) as amount_exempted,value(wht_amount_exempted,0) as wht_amount_exempted   from account_wh_tl  a  where a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.tax_type_cd =0.0 and a.brn_cd = 1024 and post_dt = '2024-10-31';




-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8567
-- If no response, customer not found in Customer Table
select    VALUE(C.PRM_ADDRESS1,'') as ad1,VALUE(C.PRM_ADDRESS2,' ') as ad2,C.CUST_NAME,value(c.import_reg_no,'') as import_reg_no,value(c.EXPort_reg_no,'') as EXPORT_reg_no,VALUE(C.TEL_OFFICE,'') as TELNO,VALUE(C.NTN,'') as NTNO, VALUE(FILER, 'N') AS FILER  FROM CUSTOMER_TL C where brn_Cd =1024 and cust_no   = 012664;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8581
-- If no response, customer not found in Customer Table
select  t.ac_desc,t.ac_desc,t.min_bal,t.ccy_cd from actyptl t where ac_type = 0966;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8591
-- If no response, 'CCY not found in CCY Table'
select  ccy_name,dec_pos from ccy_tl where ccy_cd   = 586;


-- class: FormatClass
-- Method: getRate
-- Screen : 1
-- Line: 15282

select * from ccy_exg_tl where ccy_cd=586 order by ccy_post_dt desc,tran_time desc  fetch first 1 rows ONLY;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8603
Select cond_cd as cnd_cd from  ACCTYP_COND_TL where ac_type = 0966 with ur;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8625
Select TAX_TYPE_CD  as TAX_TYPE_CD  from  cust_tax_exemp  where brn_cd = 1024 and cust_no = 012664 and expiry_date >= '2024-09-19';



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8655
Select cnd_cd as cnd_cd from  acc_cond_tl where brn_cd = 1024 and ac_type = 0966 and cust_no = 012664 and run_no = 01 and chk_digt = 6;



-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4641
select * from cm_loan_tr where  brn_cd=1024 and cust_no_n=012664 and AC_TYPE_n=0966 and run_no_n=01 and chk_digt_n=6 AND LOAN_NO=00015 AND LOAN_YEAR=2017 and post_dt='2024-10-31' and ref_no <> '' and value(tran_no,0)=0;


-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4654
Update acc_lock_tl set user_brn_cd=1024,user_id='TSTING',terminal_id='192.168.236.11',lock_time=CURRENT TIME,lock_status = 'N' where brn_cd=1024 and ac_type=0966 and cust_no=012664 and run_no=01 and chk_digt=6;


-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4678
select 1 from tfin_vouch_tl  where tran_sts='1' and narr2='Deal Recovered'  and brn_cd=1024 and cust_no=012664 and AC_TYPE=0966 and run_no=01 and chk_digt=6 and doc_type in ('LF')  AND doc_NO=00015 AND doc_YEAR=2017;



-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4692
select * from CHARGES_PENDING_TL where  brn_cd=1024 and DOC_NO = 00015 and DOC_Year = 2017 and Status = 'A' and DOC_TYPE = 'LF' and IIDEN  = 'I'  and CUST_NO = 012664;



-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4707
select rtrim(value(sub_fac_desc,'')) as sub_fac_desc, value(lim_amt,0) as lim_amt,value(avl_lim,0) as avl_lim  from cm_acc_lim_tl A INNER JOIN cm_sub_facility_tl b  on (a.MAJ_FAC_CD=b.MAJ_FAC_CD and a.SUB_FAC_CD=b.SUB_FAC_CD) where  brn_cd=1024 and ac_type=0966 and cust_no=012664 and run_no=01 and chk_digt=6 and (status is null or status='A')  union select rtrim(value(sub_fac_desc,'')) as sub_fac_desc ,value(lim_amt,0) as lim_amt,value(avl_lim,0) as avl_lim  from cm_acc_SUB_lim_tl A INNER JOIN cm_sub_facility_tl b  on (a.MAJ_FAC_CD=b.MAJ_FAC_CD and a.SUB_FAC_CD=b.SUB_FAC_CD) where  brn_cd=1024 and ac_type=0966 and cust_no=012664 and run_no=01 and chk_digt=6 and (status is null or status='A');

-- class: CM_SecDepst_Refund_Leasing
-- Method: tbl_recovery_sch_MouseClicked
-- Screen : 1
-- Line: 4867
select POST_BY,STATUS,value(AVL_SEQ_NO,0) as AVL_SEQ_NO,int_lim_no,int_lim_year,LOAN_TYPE,LOAN_NO,LOAN_YEAR,value(OD_RATE,0) as OD_RATE,digits(NOM_AC_TYPE) as NOM_AC_TYPE,digits(NOM_CUST_NO) as NOM_CUST_NO,digits(NOM_RUN_NO) as NOM_RUN_NO,digits(NOM_CHK_DIGT) as NOM_CHK_DIGT,digits(LOAN_AC_TYPE) as LOAN_AC_TYPE,digits(LOAN_CUST_NO) as LOAN_CUST_NO,digits(LOAN_RUN_NO) as LOAN_RUN_NO,digits(LOAN_CHK_DIGT) as LOAN_CHK_DIGT,digits(OVR_AC_TYPE) as OVR_AC_TYPE,digits(OVR_CUST_NO) as OVR_CUST_NO,digits(OVR_RUN_NO) as OVR_RUN_NO,digits(OVR_CHK_DIGT) as OVR_CHK_DIGT,digits(CR_AC_TYPE) as CR_AC_TYPE,digits(CR_CUST_NO) as CR_CUST_NO,digits(CR_RUN_NO) as CR_RUN_NO,digits(CR_CHK_DIGT) as CR_CHK_DIGT,GRANT_DATE,MAT_DATE,LOAN_AMT,FREQ,value(DOC_TYPE,'') as DOC_TYPE,VALUE(DOC_NO,0) AS DOC_NO,VALUE(DOC_YEAR,0) AS DOC_YEAR,LUM_SUM_INST,value(REC_AMT,0) as REC_AMT,VALUE(TENURE,0) as TENURE,TENURE_UNITS,VALUE(NO_OF_INST,0) as NO_OF_INST,REPAY_FREQ,MORAT_DT,VALUE(MORAT_PRD,0) as MORAT_PRD,INST_SCH_DT,digits(RT_CODE) as RT_CODE,BASE_RATE,SPREAD_RT,FLOOR_RT,CEILING_RT,MU_RATE,value(ACCR_AMT,0) as ACCR_AMT,REMARKS,VALUE(DAYS_TOT_INT,0) AS DAYS_TOT_INT ,digits(SECDEP_NO) AS SECDEP_NO,VALUE(SECDEP_PERC,0) AS SECDEP_PERC,VALUE(SECDEP_AMT,0) AS SECDEP_AMT,value(SALVAGE_PERC,0) as SALVAGE_PERC,value(Salvage_AMT,0) as Salvage_AMT,digits(Salvage_AC_TYPE) as Salvage_AC_TYPE,digits(Salvage_CUST_NO) as Salvage_CUST_NO,digits(Salvage_RUN_NO) as Salvage_RUN_NO,digits(Salvage_CHK_DIGT) as Salvage_CHK_DIGT, VALUE(CHARITY_AMT,0) as CHARITY_AMT  from cm_loan_tl where  brn_cd=1024 and cust_no=012664 and AC_TYPE=0966 and run_no=01 and chk_digt=6 and full='Y'  and status!='C'  AND LOAN_NO=00015 AND LOAN_YEAR=2017;

-- class: CM_SecDepst_Refund_Leasing
-- Method: get_SecDeposit_info
-- Screen : 1
-- Line: 948
select BRN_CD,digits(SECDEP_NO) as SECDEP_NO,LOAN_TYPE,LOAN_AC_TYPE,LOAN_CUST_NO,LOAN_RUN_NO,LOAN_CHK_DIGT,digits(SECDEP_AC_TYPE) as SECDEP_AC_TYPE,digits(SECDEP_CUST_NO) as SECDEP_CUST_NO,digits(SECDEP_RUN_NO) as SECDEP_RUN_NO,digits(SECDEP_CHK_DIGT) as SECDEP_CHK_DIGT,digits(DR_AC_TYPE) as DR_AC_TYPE,digits(DR_CUST_NO) as DR_CUST_NO,digits(DR_RUN_NO) as DR_RUN_NO,digits(DR_CHK_DIGT) as DR_CHK_DIGT,SECDEP_PERC,SECDEP_AMT,FIN_AMT,STATUS,digits(VOUCH_NO) as VOUCH_NO,digits(VOUCH_YEAR) as VOUCH_YEAR, REMARKS,POST_BY,POST_DT,POST_TIME,value(inst_no,0) as inst_no,inst_dt  from cm_SECDEPOSIT_TL  where brn_cd=1024 and loan_ac_type=0966 and loan_cust_no=012664 and loan_run_no=01 and loan_chk_digt=6 and loan_type in ('LF') and status!='C'  and SECDEP_NO=000002;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8476
select a.ledg_bal as ledgbal,a.shadow_d as shadow_d,a.shadow_c as shadow_c,a.lim_amt as lim_amt,a.amt_blk as block,a.uncl_amt as uncl_amt,a.AC_OP_DT,a.MOTHER_NAME,a.acc_cat_cd,  a.ac_title,A.IN_ACR_C,A.IN_ACR_d ,VALUE(A.MAIL_ADDRESS1,' ') as mad1,VALUE(A.MAIL_ADDRESS2,' ') as mad2,A.AC_TITLE from ACCOUNT_TL A  where  a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.brn_cd = 1024;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8532
Select value(wht_amount_due,0) as wht_amount_due  ,value(amount,0) as amount,value(amount_exempted,0) as amount_exempted,value(wht_amount_exempted,0) as wht_amount_exempted   from account_wh_tl  a  where a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.tax_type_cd =0.0 and a.brn_cd = 1024 and post_dt = '2024-10-31';


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8567
-- If no response, customer not found in Customer Table
select    VALUE(C.PRM_ADDRESS1,'') as ad1,VALUE(C.PRM_ADDRESS2,' ') as ad2,C.CUST_NAME,value(c.import_reg_no,'') as import_reg_no,value(c.EXPort_reg_no,'') as EXPORT_reg_no,VALUE(C.TEL_OFFICE,'') as TELNO,VALUE(C.NTN,'') as NTNO, VALUE(FILER, 'N') AS FILER  FROM CUSTOMER_TL C where brn_Cd =1024 and cust_no   = 012664;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8581
-- If no response, customer not found in Customer Table
select  t.ac_desc,t.ac_desc,t.min_bal,t.ccy_cd from actyptl t where ac_type = 0966;

-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8591
-- If no response, 'CCY not found in CCY Table'
select  ccy_name,dec_pos from ccy_tl where ccy_cd   = 586;


-- class: FormatClass
-- Method: getRate
-- Screen : 1
-- Line: 15282

select * from ccy_exg_tl where ccy_cd=586 order by ccy_post_dt desc,tran_time desc  fetch first 1 rows ONLY;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8603
Select cond_cd as cnd_cd from  ACCTYP_COND_TL where ac_type = 0966 with ur;



-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8625
Select TAX_TYPE_CD  as TAX_TYPE_CD  from  cust_tax_exemp  where brn_cd = 1024 and cust_no = 012664 and expiry_date >= '2024-09-19';


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8655
Select cnd_cd as cnd_cd from  acc_cond_tl where brn_cd = 1024 and ac_type = 0966 and cust_no = 012664 and run_no = 01 and chk_digt = 6;



-- class: TfinUtil
-- Method: getTrandesc
-- Screen : 1
-- Line: 12067
SELECT value(tran_desc1,'') as tran_desc1,value(tran_desc2,'') as tran_desc2 from trn_code_tl where tran_Cd = 30631;

-- class: TfinUtil
-- Method: chkexception
-- Screen : 1
-- Line: 1012
select dec_pos from ccy_tl  where ccy_cd  = 586;


-- class: TfinUtil
-- Method: getCustomerInfo
-- Screen : 1
-- Line: 8476
select a.ledg_bal as ledgbal,a.shadow_d as shadow_d,a.shadow_c as shadow_c,a.lim_amt as lim_amt,a.amt_blk as block,a.uncl_amt as uncl_amt,a.AC_OP_DT,a.MOTHER_NAME,a.acc_cat_cd,  a.ac_title,A.IN_ACR_C,A.IN_ACR_d ,VALUE(A.MAIL_ADDRESS1,' ') as mad1,VALUE(A.MAIL_ADDRESS2,' ') as mad2,A.AC_TITLE from ACCOUNT_TL A  where  a.cust_no = 012664 and  a.ac_type =  0966 and  a.run_no = 01 and a.chk_digt = 6 and a.brn_cd = 1024;





--class: tfinexception
-- method: addexception
-- screen 2
--line: 252
 select * from EXCEPTIONS_TL where EXCP_cd = 4;


-- class: tfinexception
-- method: excessOver_tran_count
-- screen 2
-- line: 3371
select distinct tbname from sysibm.syscolumns  where tbname ='SPCHK_SETUP_TL';

-- class: tfinexception
-- method: excessOver_tran_count
-- screen 2
-- line: 3375
select value(tran_count,0) as tran_count from SPCHK_SETUP_TL  where ac_type=0963;


-- class: tfinexception
-- method: excessOver_tran_count
-- screen 2
-- line: 3380
select 1 as tran_count from sysibm.sysdummy1 where  (0963 in (select ac_type from SPCHK_SETUP_TL))  and 1 in (select 1 from spchk_trncd_setup_tl where ac_type=0963 and (30631 between from_tran_cd and to_tran_cd) );


--class: tfinexception
-- method: excessOver_tran_count
-- screen 2
--line: 3388
with rs (tran_count) as (select count(*) as tran_count from tran_fin_tl a where  brn_cd=1024 and ac_type=0963 and cust_no=012664 and run_no=01 and chk_digt=3 and (ac_type in (select ac_type from SPCHK_SETUP_TL))  and tran_sts!='9' and post_by not in ('SYSTEM','DORMANT') and ac_iden='C'  and 1 in (select 1 from spchk_trncd_setup_tl b where ac_type=0963 and (a.tran_cd between from_tran_cd and to_tran_cd) )  union all  select value(tran_count,0) as tran_count from account_tl where  brn_cd=1024 and ac_type=0963 and cust_no=012664 and run_no=01 and chk_digt=3 and (ac_type in (select ac_type from SPCHK_SETUP_TL))  union all  select 1 as tran_count from sysibm.sysdummy1 where  (0963 in (select ac_type from SPCHK_SETUP_TL))  and 1 in (select 1 from spchk_trncd_setup_tl where ac_type=0963 and (30631 between from_tran_cd and to_tran_cd) ) ) select sum(tran_count) as tran_count from rs;


-- class: FormatClass
-- Method: skip_activity_remit
-- Screen : 2
-- Line: 12200
"select 1 from acctyp_cond_tl where ac_type = " + acType + " and cond_cd=" + IConstants.ASAAN_NATURE_TYPE.ASAAN_REMIT;


-- class: FormatClass
-- Method: skip_activity_remit
-- Screen : 2
-- Line: 12208
" SELECT ACT_CD FROM  ACTIVITY_TRAN_ALLOW_TL WHERE ACT_CD ='"
							+ criteriaDTO.getTran_cd()
							+ "' AND  PROD_CND_CD ="
							+ IConstants.ASAAN_NATURE_TYPE.ASAAN_REMIT
							+ " AND DR_CR = '" + criteriaDTO.getDrCr() + "'";
						
						

-- class: Tfinexception
-- Method: checkAccountConditions
-- Screen : 2
-- Line: 4201
 SELECT ACT_CD FROM  ACTIVITY_TRAN_ALLOW_TL WHERE ACT_CD ='30631' AND  PROD_CND_CD =71 AND DR_CR = 'C';


-- account locked
--METHOD: unlockAccount
-- line: 15619
-- class: TfinUtil
Update acc_lock_tl set lock_status = 'N'  where brn_cd = 1024 and ac_type = 0966 and cust_no = 012664 and run_no=01 and chk_digt=6;
